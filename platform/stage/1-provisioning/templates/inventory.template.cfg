%{ for provider, regions in providers ~}
%{ for region, resources in regions ~}
%{ for service, hosts in resources.services ~}
[${provider}-${region}-${service}]
%{ for host in hosts ~}
${host.name} ansible_host=${host.ipv4_address} ipv4_address_private=${host.ipv4_address_private}
%{ endfor ~}
%{ endfor ~}
%{ endfor ~}
%{ endfor ~}

%{ for provider, regions in providers ~}
%{ for region, resources in regions ~}
%{ for service, hosts in resources.services ~}
[${provider}-${region}-${service}:vars]
ansible_connection=ssh 
ansible_user=ufukty
vpc_cidr=${resources.vpc.ip_range}
%{ endfor ~}
%{ endfor ~}
%{ endfor ~}

%{ for provider, regions in providers ~}
[${provider}:children]
%{ for region, resources in regions ~}
%{ for service, hosts in resources.services ~}
${provider}-${region}-${service}
%{ endfor ~}
%{ endfor ~}
%{ endfor ~}

%{ for provider, regions in providers ~}
%{ for region, resources in regions ~}
[${provider}-${region}:children]
%{ for service, hosts in resources.services ~}
${provider}-${region}-${service}
%{ endfor ~}
%{ endfor ~}
%{ endfor ~}

%{ for provider, regions in providers ~}
%{ for region, resources in regions ~}
%{ for service, hosts in resources.services ~}
[${service}:children]
${provider}-${region}-${service}
%{ endfor ~}
%{ endfor ~}
%{ endfor ~}