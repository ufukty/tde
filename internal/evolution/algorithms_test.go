package evolution

import "testing"

func TestBinaryRangeSearch(t *testing.T) {

	values := []float64{
		0.0, 0.5, 1.2, 1.5, 1.9, 2.4, 3.5, 5.0, 5.1,
	}

	testCases := []struct {
		key  float64
		want int
	}{
		{-0.4, -1},
		{0.0, 0},
		{0.003275058479104, 0},
		{0.051653628821504, 0},
		{0.073821599203328, 0},
		{0.077568278691840, 0},
		{0.141161587802112, 0},
		{0.4, 0},
		{0.499220254720000, 0},
		{0.5, 1},
		{0.523633630642176, 1},
		{0.6, 1},
		{0.6, 1},
		{0.6, 1},
		{0.606093078953984, 1},
		{0.7, 1},
		{0.758019668475904, 1},
		{0.8, 1},
		{0.9, 1},
		{0.90702324039680, 1},
		{1.119519152013312, 1},
		{1.180454810025984, 1},
		{1.187266319843328, 1},
		{1.2, 2},
		{1.252245156888576, 2},
		{1.322561264680960, 2},
		{1.365033785196544, 2},
		{1.499999, 2},
		{1.5, 3},
		{1.72455274479616, 3},
		{1.724739844276224, 3},
		{1.755768258789376, 3},
		{1.758445954891776, 3},
		{1.785894388334592, 3},
		{1.8, 3},
		{1.9, 4},
		{1.908036088102912, 4},
		{1.944757871804416, 4},
		{2.042095179137024, 4},
		{2.122710612180992, 4},
		{2.3, 4},
		{2.4, 5},
		{2.418839786618880, 5},
		{3.098357419474944, 5},
		{3.4, 5},
		{3.5, 6},
		{3.531016306163712, 6},
		{3.915128013586432, 6},
		{4.061231172288512, 6},
		{4.127605047427072, 6},
		{4.348672397541376, 6},
		{4.9, 6},
		{5.0, 7},
		{5.000001, 7},
		{5.035247104327680, 7},
		{5.06287226019840, 7},
		{5.077430578233344, 7},
		{5.1, 8},
		{5.2, 8},
		{5.209656402116608, 8},
		{5.24883175931904, 8},
		{5.441704914059264, 8},
		{5.446366853595136, 8},
		{25.472660618215424, 8},
	}

	for _, testCase := range testCases {
		got := BinaryRangeSearch(values, testCase.key)
		if got != testCase.want {
			t.Errorf("For %f; expected %d, got %d", testCase.key, testCase.want, got)
		}
	}

}
